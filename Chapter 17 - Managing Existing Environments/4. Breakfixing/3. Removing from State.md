# 3. Removing from State

In the previous section, we discussed apply-time failures and their impact on Terraform infrastructure management. Another common situation that can arise when managing environments with Terraform is the need to remove a resource from the state. As we’ve discussed in previous chapters, this can be achieved both imperatively using the `terraform state rm` command or declaratively by using the `removed` block in your HashiCorp Configuration Language code.

One such scenario is when you need to decommission resources. If you manually delete a resource outside of Terraform, it needs to be removed from the state file to prevent errors during the next `terraform apply`. Similarly, if a resource is accidentally imported into the wrong location in your Terraform configuration, it can be removed before re-importing it correctly.

When working in a team, if someone else has already removed a resource but your local state file is not yet updated, resolving the discrepancy may involve removing the resource from your state file. Cleaning up orphaned resources is another important use case. If a resource becomes orphaned (no longer managed by Terraform) due to manual changes or configuration errors, it can be removed from the state file.

Another place where you may need to remove resources is during the refactoring process. Of course, as we’ve discussed, it’s more common to move resources in this scenario, but there are cases where removal might be necessary as well, such as splitting a large configuration into smaller modules, resources might need to be removed from the state file before re-importing them into their new locations. Additionally, if a resource needs to be replaced with a new one (for example, due to a change in the resource's configuration that requires recreation), the old resource might be removed from the state file before creating the new one. During testing or debugging, temporarily removing resources from the state file can help isolate issues or test specific scenarios. If you're consolidating multiple similar resources into a single resource (e.g., merging several security groups into one), the old resources might be removed from the state file.